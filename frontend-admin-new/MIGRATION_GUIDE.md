# Frontend Admin é‡æ„è¿ç§»æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—æè¿°äº†å¦‚ä½•ä»åŸºäº UmiJS çš„æ—§ç‰ˆ frontend-admin è¿ç§»åˆ°æ–°çš„ React + Vite æ¶æ„ã€‚

## ä¸»è¦å˜æ›´

### 1. æ¶æ„å˜æ›´

**æ—§ç‰ˆ (UmiJS)**:
- åŸºäº UmiJS æ¡†æ¶
- çº¦å®šå¼è·¯ç”±
- å†…ç½®çš„æ„å»ºå’Œå¼€å‘å·¥å…·
- `.umirc.ts` é…ç½®æ–‡ä»¶

**æ–°ç‰ˆ (React + Vite)**:
- çº¯ React åº”ç”¨
- React Router å£°æ˜å¼è·¯ç”±
- Vite æ„å»ºå·¥å…·
- `vite.config.ts` é…ç½®æ–‡ä»¶

### 2. é¡¹ç›®ç»“æ„å¯¹æ¯”

```
æ—§ç‰ˆç»“æ„:                    æ–°ç‰ˆç»“æ„:
â”œâ”€â”€ .umirc.ts               â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ src/                    â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ .umi/              â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ .umi-production/   â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”œâ”€â”€ layouts/           â”‚   â”‚   â”œâ”€â”€ Charts/
â”‚   â”œâ”€â”€ pages/             â”‚   â”‚   â””â”€â”€ ThemeProvider/
â”‚   â”œâ”€â”€ components/        â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ services/          â”‚   â”‚   â”œâ”€â”€ Login/
â”‚   â””â”€â”€ app.tsx            â”‚   â”‚   â””â”€â”€ Dashboard/
â””â”€â”€ package.json           â”‚   â”œâ”€â”€ hooks/
                           â”‚   â”œâ”€â”€ services/
                           â”‚   â”œâ”€â”€ types/
                           â”‚   â”œâ”€â”€ styles/
                           â”‚   â”œâ”€â”€ App.tsx
                           â”‚   â””â”€â”€ main.tsx
                           â””â”€â”€ package.json
```

### 3. ä¾èµ–å˜æ›´

**ç§»é™¤çš„ä¾èµ–**:
- `@umijs/max`
- `@ant-design/pro-components`
- UmiJS ç›¸å…³æ’ä»¶

**æ–°å¢çš„ä¾èµ–**:
- `vite`
- `@vitejs/plugin-react`
- `react-router-dom`
- `echarts-for-react`

### 4. é…ç½®æ–‡ä»¶å˜æ›´

**æ—§ç‰ˆ `.umirc.ts`**:
```typescript
export default {
  npmClient: 'pnpm',
  tailwindcss: {},
  plugins: ['@umijs/plugins/dist/tailwindcss'],
  // ...å…¶ä»–UmiJSé…ç½®
};
```

**æ–°ç‰ˆ `vite.config.ts`**:
```typescript
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: { '@': path.resolve(__dirname, './src') },
  },
  css: {
    preprocessorOptions: { less: { javascriptEnabled: true } },
  },
  server: {
    port: 3000,
    proxy: { '/api': { target: 'http://localhost:3001', changeOrigin: true } },
  },
});
```

## è¿ç§»æ­¥éª¤

### æ­¥éª¤ 1: å¤‡ä»½ç°æœ‰é¡¹ç›®

```bash
# å¤‡ä»½å½“å‰é¡¹ç›®
cp -r frontend-admin frontend-admin-backup
```

### æ­¥éª¤ 2: å®‰è£…æ–°é¡¹ç›®ä¾èµ–

```bash
cd frontend-admin-new
npm install
# æˆ–
pnpm install
```

### æ­¥éª¤ 3: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
# æˆ–
pnpm dev
```

### æ­¥éª¤ 4: æ•°æ®è¿ç§»

å¦‚æœéœ€è¦ä¿ç•™ç°æœ‰çš„ä¸šåŠ¡æ•°æ®æˆ–é…ç½®ï¼Œè¯·ï¼š

1. **å¤åˆ¶APIæœåŠ¡æ–‡ä»¶**: å°† `src/services/` ä¸­çš„APIè°ƒç”¨é€»è¾‘è¿ç§»åˆ°æ–°é¡¹ç›®
2. **å¤åˆ¶ä¸šåŠ¡ç»„ä»¶**: å°†è‡ªå®šä¹‰çš„ä¸šåŠ¡ç»„ä»¶è¿ç§»åˆ°æ–°çš„ç»„ä»¶ç»“æ„ä¸­
3. **å¤åˆ¶æ ·å¼æ–‡ä»¶**: å°†è‡ªå®šä¹‰æ ·å¼è¿ç§»åˆ°æ–°çš„Lessæ–‡ä»¶ä¸­

### æ­¥éª¤ 5: ç¯å¢ƒé…ç½®

1. **æ›´æ–°ç¯å¢ƒå˜é‡**: å¦‚æœæœ‰ç¯å¢ƒå˜é‡ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶
2. **æ›´æ–°APIä»£ç†**: åœ¨ `vite.config.ts` ä¸­é…ç½®æ­£ç¡®çš„åç«¯APIåœ°å€
3. **æ›´æ–°æ„å»ºè„šæœ¬**: æ›´æ–° CI/CD è„šæœ¬ä»¥ä½¿ç”¨æ–°çš„æ„å»ºå‘½ä»¤

## åŠŸèƒ½å¯¹æ¯”

### å·²å®ç°åŠŸèƒ½

âœ… **ç™»å½•é¡µé¢**
- ç°ä»£åŒ–æ·±è‰²ä¸»é¢˜è®¾è®¡
- è¡¨å•éªŒè¯å’Œé”™è¯¯å¤„ç†
- ç”¨æˆ·è®¤è¯æµç¨‹

âœ… **ä»ªè¡¨æ¿é¡µé¢**
- æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡å±•ç¤º
- é”€å”®è¶‹åŠ¿å›¾è¡¨
- åˆ†ç±»åˆ†å¸ƒç»Ÿè®¡
- TOPå•†å“æ’è¡Œè¡¨æ ¼
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

âœ… **å¸ƒå±€ç³»ç»Ÿ**
- å›ºå®šä¾§è¾¹æ å¯¼èˆª (240pxå®½åº¦)
- é¡¶éƒ¨å¯¼èˆªæ  (ç³»ç»Ÿæ ‡é¢˜ + ä¸»é¢˜åˆ‡æ¢ + ç”¨æˆ·ä¿¡æ¯)
- å“åº”å¼å†…å®¹åŒºåŸŸ

âœ… **ä¸»é¢˜ç³»ç»Ÿ**
- æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- ä¸»é¢˜åå¥½æœ¬åœ°å­˜å‚¨
- CSSå˜é‡ç®¡ç†
- å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

âœ… **ç”¨æˆ·è®¤è¯**
- ç™»å½•/ç™»å‡ºåŠŸèƒ½
- Tokenç®¡ç†
- è·¯ç”±ä¿æŠ¤
- ç”¨æˆ·ä¿¡æ¯å­˜å‚¨

### å¾…å®ç°åŠŸèƒ½

ğŸ”„ **ç”¨æˆ·ç®¡ç†é¡µé¢** (å ä½é¡µé¢å·²åˆ›å»º)
ğŸ”„ **ç³»ç»Ÿç®¡ç†é¡µé¢** (å ä½é¡µé¢å·²åˆ›å»º)

## å¼€å‘å‘½ä»¤å¯¹æ¯”

| åŠŸèƒ½ | æ—§ç‰ˆ (UmiJS) | æ–°ç‰ˆ (Vite) |
|------|-------------|-------------|
| å¼€å‘æœåŠ¡å™¨ | `npm run dev` | `npm run dev` |
| ç”Ÿäº§æ„å»º | `npm run build` | `npm run build` |
| é¢„è§ˆæ„å»º | `npm run preview` | `npm run preview` |
| ä»£ç æ ¼å¼åŒ– | `npm run format` | `npm run format` |

## æ€§èƒ½ä¼˜åŒ–

æ–°ç‰ˆæœ¬ç›¸æ¯”æ—§ç‰ˆæœ¬çš„æ€§èƒ½æå‡ï¼š

1. **æ›´å¿«çš„å¼€å‘å¯åŠ¨**: Vite çš„å†·å¯åŠ¨é€Ÿåº¦æ¯” UmiJS å¿« 3-5 å€
2. **æ›´å¿«çš„çƒ­æ›´æ–°**: Vite çš„ HMR é€Ÿåº¦æ˜¾è‘—æå‡
3. **æ›´å°çš„åŒ…ä½“ç§¯**: ç§»é™¤äº† UmiJS çš„è¿è¡Œæ—¶å¼€é”€
4. **æ›´å¥½çš„ Tree Shaking**: Vite çš„æ„å»ºä¼˜åŒ–æ›´åŠ é«˜æ•ˆ

## æ³¨æ„äº‹é¡¹

1. **è·¯ç”±å˜æ›´**: ä»çº¦å®šå¼è·¯ç”±æ”¹ä¸ºå£°æ˜å¼è·¯ç”±ï¼Œéœ€è¦åœ¨ `App.tsx` ä¸­æ‰‹åŠ¨é…ç½®è·¯ç”±
2. **å¯¼å…¥è·¯å¾„**: ç¡®ä¿æ‰€æœ‰çš„ `@/` åˆ«åå¯¼å…¥è·¯å¾„æ­£ç¡®
3. **æ ·å¼æ–‡ä»¶**: Less æ–‡ä»¶éœ€è¦æ˜¾å¼å¯¼å…¥ï¼Œä¸å†è‡ªåŠ¨æ³¨å…¥
4. **ç¯å¢ƒå˜é‡**: Vite ä½¿ç”¨ `VITE_` å‰ç¼€çš„ç¯å¢ƒå˜é‡
5. **æ„å»ºäº§ç‰©**: æ„å»ºäº§ç‰©ç»“æ„æœ‰æ‰€ä¸åŒï¼Œéœ€è¦æ›´æ–°éƒ¨ç½²è„šæœ¬

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: å¯åŠ¨æ—¶æŠ¥é”™ "Cannot resolve dependency"**
A: ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®å®‰è£…ï¼Œè¿è¡Œ `npm install` æˆ– `pnpm install`

**Q: æ ·å¼ä¸ç”Ÿæ•ˆ**
A: æ£€æŸ¥ Less æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥ï¼Œç¡®ä¿ `vite.config.ts` ä¸­çš„ Less é…ç½®æ­£ç¡®

**Q: API è¯·æ±‚å¤±è´¥**
A: æ£€æŸ¥ `vite.config.ts` ä¸­çš„ä»£ç†é…ç½®ï¼Œç¡®ä¿åç«¯æœåŠ¡åœ°å€æ­£ç¡®

**Q: è·¯ç”±è·³è½¬ä¸å·¥ä½œ**
A: ç¡®ä¿ä½¿ç”¨ `react-router-dom` çš„ `useNavigate` è€Œä¸æ˜¯ UmiJS çš„ `history`

### è°ƒè¯•æŠ€å·§

1. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ£€æŸ¥ç½‘ç»œè¯·æ±‚
2. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. ä½¿ç”¨ React Developer Tools è°ƒè¯•ç»„ä»¶çŠ¶æ€
4. æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„ç”¨æˆ·è®¤è¯ä¿¡æ¯

## åç»­è®¡åˆ’

1. **åŠŸèƒ½å®Œå–„**: å®ç°ç”¨æˆ·ç®¡ç†å’Œç³»ç»Ÿç®¡ç†é¡µé¢
2. **æµ‹è¯•è¦†ç›–**: æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
3. **æ€§èƒ½ç›‘æ§**: æ·»åŠ æ€§èƒ½ç›‘æ§å’Œé”™è¯¯è¿½è¸ª
4. **æ–‡æ¡£å®Œå–„**: å®Œå–„APIæ–‡æ¡£å’Œç»„ä»¶æ–‡æ¡£

## æ”¯æŒ

å¦‚æœåœ¨è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬è¿ç§»æŒ‡å—çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„ README.md æ–‡ä»¶
3. æŸ¥çœ‹ç›¸å…³ä¾èµ–çš„å®˜æ–¹æ–‡æ¡£
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ