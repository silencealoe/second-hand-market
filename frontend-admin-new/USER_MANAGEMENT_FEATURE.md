# 用户管理功能开发文档

## 功能概述

用户管理功能分为两个主要模块：
1. **后台管理用户**：管理系统管理员账号，包括超级管理员和普通管理员
2. **商城用户**：管理商城平台的普通用户账号

## 功能特性

### 后台管理用户模块

#### 核心功能
- ✅ 用户列表展示（支持分页）
- ✅ 搜索功能（用户名、真实姓名）
- ✅ 角色筛选（超级管理员、普通管理员）
- ✅ 状态筛选（启用、禁用）
- ✅ 新增管理员用户
- ✅ 编辑用户信息
- ✅ 删除用户
- ✅ 重置用户密码
- ✅ 启用/禁用用户

#### 数据字段
- 用户ID
- 用户名（唯一）
- 真实姓名
- 手机号
- 头像
- 角色（超级管理员/普通管理员）
- 状态（启用/禁用）
- 最后登录时间
- 创建时间
- 更新时间

#### 权限控制
- 不能删除自己
- 不能禁用自己
- 密码重置后显示新密码

### 商城用户模块

#### 核心功能
- ✅ 用户列表展示
- ✅ 搜索功能（用户名、邮箱、手机号）
- ✅ 查看用户详情
- ✅ 编辑用户信息
- ✅ 删除用户

#### 数据字段
- 用户ID
- 用户名
- 邮箱
- 手机号
- 头像
- 地址
- 注册时间
- 更新时间

## 技术实现

### 前端技术栈
- **React 18** + **TypeScript**
- **Ant Design** - UI组件库
- **Less** - 样式预处理器
- **Axios** - HTTP客户端

### 文件结构
```
src/
├── types/
│   └── user.ts                    # 用户相关类型定义
├── services/
│   └── user.ts                    # 用户管理API服务
├── pages/
│   └── UserManagement/
│       ├── index.tsx              # 主页面组件
│       ├── index.less             # 主页面样式
│       └── components/
│           ├── AdminUserManagement.tsx      # 管理员用户管理
│           ├── AdminUserManagement.less     # 管理员用户样式
│           ├── ShopUserManagement.tsx       # 商城用户管理
│           └── ShopUserManagement.less      # 商城用户样式
```

### API接口映射

#### 后台管理用户API
| 功能 | 方法 | 接口路径 | 说明 |
|------|------|----------|------|
| 获取用户列表 | GET | `/admin/users` | 支持分页、搜索、筛选 |
| 获取用户详情 | GET | `/admin/users/:id` | 根据ID获取用户信息 |
| 创建用户 | POST | `/admin/users` | 创建新的管理员用户 |
| 更新用户 | PATCH | `/admin/users/:id` | 更新用户基本信息 |
| 删除用户 | DELETE | `/admin/users/:id` | 删除用户账号 |
| 重置密码 | POST | `/admin/users/:id/reset-password` | 重置用户密码 |
| 切换状态 | PATCH | `/admin/users/:id/status` | 启用/禁用用户 |

#### 商城用户API
| 功能 | 方法 | 接口路径 | 说明 |
|------|------|----------|------|
| 获取用户列表 | GET | `/users` | 获取所有商城用户 |
| 获取用户详情 | GET | `/users/:id` | 根据ID获取用户信息 |
| 更新用户 | PATCH | `/users/:id` | 更新用户基本信息 |
| 删除用户 | DELETE | `/users/:id` | 删除用户账号 |

## 使用说明

### 访问路径
- 用户管理页面：`/users`
- 页面包含两个Tab：
  - 后台管理用户
  - 商城用户

### 操作流程

#### 管理员用户管理
1. **查看用户列表**：进入页面自动加载用户列表
2. **搜索用户**：在搜索框输入关键词进行搜索
3. **筛选用户**：通过角色和状态下拉框筛选
4. **新增用户**：
   - 点击"新增用户"按钮
   - 填写用户信息（用户名、密码、真实姓名、手机号、角色）
   - 提交创建
5. **编辑用户**：
   - 点击用户行的"编辑"按钮
   - 修改用户信息（不包括密码）
   - 提交更新
6. **重置密码**：
   - 点击"重置密码"按钮
   - 确认操作后显示新密码
7. **启用/禁用**：点击对应按钮切换用户状态
8. **删除用户**：点击删除按钮并确认

#### 商城用户管理
1. **查看用户列表**：进入Tab自动加载用户列表
2. **搜索用户**：支持用户名、邮箱、手机号搜索
3. **查看详情**：点击"查看详情"按钮查看完整用户信息
4. **编辑用户**：
   - 点击"编辑"按钮
   - 修改用户信息
   - 提交更新
5. **删除用户**：点击删除按钮并确认

## 响应式设计

- 支持桌面端和移动端访问
- 表格在小屏幕下可横向滚动
- 操作按钮在移动端自适应布局
- 搜索和筛选控件响应式排列

## 错误处理

- API调用失败时显示错误提示
- 表单验证失败时显示具体错误信息
- 网络异常时提供重试机制
- 权限不足时显示相应提示

## 安全考虑

- 所有API调用都需要认证
- 敏感操作（删除、重置密码）需要二次确认
- 密码重置后立即显示新密码，提醒用户保管
- 不能对自己执行删除和禁用操作

## 后续优化建议

1. **批量操作**：支持批量删除、批量启用/禁用
2. **导出功能**：支持用户列表导出为Excel
3. **高级筛选**：支持更多筛选条件（注册时间范围等）
4. **用户统计**：添加用户数量统计图表
5. **操作日志**：记录用户管理操作日志
6. **角色管理**：独立的角色管理功能
7. **权限管理**：细粒度的权限控制